/***********************************************************************
*
*  Coda Slider 3
*  Kevin Batdorf
*
*  http://kevinbatdorf.github.com/codaslider
*
*  GPL license & MIT license
*
************************************************************************/
if(typeof Object.create!=="function"){Object.create=function(e){function t(){}t.prototype=e;return new t}}(function(e,t,n,r){var i={init:function(t,n){var r=this;e("body").removeClass("coda-slider-no-js");e(".coda-slider").prepend('<p class="loading">Loading...<br /><img src="./img/ajax-loader.gif" width="220" height="19" alt="loading..." /></p>');r.elem=n;r.$elem=e(n);r.sliderId="#"+r.$elem.attr("id");r.options=e.extend({},e.fn.codaSlider.options,t);r.sliderId="#"+r.$elem.attr("id");r.build();if(r.options.autoSlide){r.autoSlide()}r.events();e("p.loading").remove()},build:function(){var n=this;if(e(n.sliderId).parent().attr("class")!="coda-slider-wrapper"){e(n.sliderId).wrap('<div id="'+n.$elem.attr("id")+'-wrapper" class="coda-slider-wrapper"></div>')}e(n.sliderId+" > div").addClass("panel");n.panelClass=n.sliderId+" .panel";e(n.panelClass).wrapAll('<div class="panel-container"></div>');if(e(n.panelClass).children().attr("class")!="panel-wrapper"){e(n.panelClass).wrapInner('<div class="panel-wrapper"></div>')}n.panelContainer=e(n.panelClass).parent();if(n.options.hashLinking){n.hash=t.location.hash;n.hashPanel=n.hash.replace("#","")}n.currentTab=n.options.hashLinking&&n.hash?n.hashPanel-1:n.options.firstPanelToLoad-1;if(n.options.autoHeight){e(n.sliderId).css("height",e(e(n.panelContainer).children()[n.currentTab]).height()+e(n.sliderId+"-wrapper .coda-nav-right").height())}if(n.options.dynamicTabs){n.addNavigation()}if(n.options.dynamicArrows){n.addArrows()}n.totalSliderWidth=e(n.sliderId).outerWidth(true)+e(e(n.sliderId).parent()).children("[class^=coda-nav-left]").outerWidth(true)+e(e(n.sliderId).parent()).children("[class^=coda-nav-right]").outerWidth(true);e(e(n.sliderId).parent()).css("width",n.totalSliderWidth);if(n.options.dynamicTabs){n.alignNavigation()}if(n.options.continuous){e(n.panelContainer).prepend(e(n.panelContainer).children().last().clone());e(n.panelContainer).append(e(n.panelContainer).children().eq(1).clone())}n.clickable=true;n.panelCount=e(n.panelClass).length;n.panelWidth=e(n.panelClass).outerWidth();n.totalWidth=n.panelCount*n.panelWidth;n.pSign="px";n.slideWidth=e(n.sliderId).width();e(n.panelContainer).css("margin-left",-n.slideWidth*~~n.options.continuous+ -n.slideWidth*n.currentTab);n.setCurrent(n.currentTab);e(n.sliderId+" .panel-container").css("width",n.totalWidth)},addNavigation:function(){var t=this;var n='<div class="coda-nav"><ul></ul></div>';if(t.options.dynamicTabsPosition==="bottom"){e(t.sliderId).after(n)}else{e(t.sliderId).before(n)}e.each(t.$elem.find(t.options.panelTitleSelector),function(n){e(e(t.sliderId).parent()).find(".coda-nav ul").append('<li class="tab'+(n+1)+'"><a href="#'+(n+1)+'" title="'+e(this).text()+'">'+e(this).text()+"</a></li>")})},alignNavigation:function(){var t=this;t.totalNavWidth=0;var n="";if(t.options.dynamicArrowsGraphical){n="-arrow"}if(t.options.dynamicTabsAlign!="center"){e(e(t.sliderId).parent()).find(".coda-nav ul").css("margin-"+t.options.dynamicTabsAlign,e(e(t.sliderId).parent()).find(".coda-nav-"+t.options.dynamicTabsAlign+n).outerWidth(true)+parseInt(e(t.sliderId).css("margin-"+t.options.dynamicTabsAlign),10));e(e(t.sliderId).parent()).find(".coda-nav ul").css("float",t.options.dynamicTabsAlign)}else{e(e(t.sliderId).parent()).find(".coda-nav li a").each(function(){t.totalNavWidth+=e(this).outerWidth(true)});e(e(t.sliderId).parent()).find(".coda-nav ul").css("width",t.totalNavWidth+1)}},addArrows:function(){var t=this;e(t.sliderId).parent().addClass("arrows");if(t.options.dynamicArrowsGraphical){e(t.sliderId).before('<div class="coda-nav-left-arrow" data-dir="prev" title="Slide left"><a href="#"></a></div>');e(t.sliderId).after('<div class="coda-nav-right-arrow" data-dir="next" title="Slide right"><a href="#"></a></div>');if(!t.options.continuousArrows){e(".coda-nav-left-arrow").css("visibility","hidden")}}else{e(t.sliderId).before('<div class="coda-nav-left" data-dir="prev" title="Slide left"><a href="#">'+t.options.dynamicArrowLeftText+"</a></div>");e(t.sliderId).after('<div class="coda-nav-right" data-dir="next" title="Slide right"><a href="#">'+t.options.dynamicArrowRightText+"</a></div>");if(!t.options.continuousArrows){e(".coda-nav-left").css("visibility","hidden")}}},events:function(){var t=this;e(e(t.sliderId).parent()).find("[class^=coda-nav-]").on("click",function(n){if(!t.clickable&&t.options.continuous){return false}t.setCurrent(e(this).attr("class").split("-")[2]);t.showArrows();if(t.options.continuous){t.clickable=false}return false});e(e(t.sliderId).parent()).find("[class^=coda-nav] li").on("click",function(n){if(!t.clickable&&t.options.continuous){return false}t.setCurrent(parseInt(e(this).attr("class").split("tab")[1],10)-1);t.showArrows();if(t.options.continuous){t.clickable=false}return false});e("[data-ref*="+t.sliderId.split("#")[1]+"]").on("click",function(n){if(!t.clickable&&t.options.continuous){return false}if(t.options.autoSlideControls){if(e(this).attr("name")==="stop"){e(this).html(t.options.autoSlideStartText).attr("name","start");clearTimeout(t.autoslideTimeout);return false}if(e(this).attr("name")==="start"){e(this).html(t.options.autoSlideStopText).attr("name","stop");t.setCurrent(t.currentTab+1);t.autoSlide();return false}}t.setCurrent(parseInt(e(this).attr("href").split("#")[1]-1,10));if(t.options.continuous){t.clickable=false}if(t.options.autoSlideStopWhenClicked){clearTimeout(t.autoslideTimeout)}return false});e(e(t.sliderId).parent()).find("*").on("click",function(n){if(t.options.autoSlideControls&&t.options.autoSlideStopWhenClicked){e("body").find("[data-ref*="+t.sliderId.split("#")[1]+"][name=stop]").html(t.options.autoSlideStartText);clearTimeout(t.autoslideTimeout)}if(!t.clickable&&t.options.continuous){if(t.options.autoSlideStopWhenClicked){clearTimeout(t.autoslideTimeout)}return false}if(t.options.autoSlide){if(t.options.autoSlideStopWhenClicked){clearTimeout(t.autoslideTimeout)}else{t.autoSlide(clearTimeout(t.autoslideTimeout));t.clickable=true}}if(t.options.continuous){clearTimeout(t.continuousTimeout)}})},showArrows:function(){var t=this;if(t.options.dynamicArrowsGraphical){navLeft=".coda-nav-left-arrow";navRight=".coda-nav-right-arrow"}else{navLeft=".coda-nav-left";navRight=".coda-nav-right"}if(!t.options.continuousArrows){if(t.currentTab===t.panelCount-3){e(navLeft).css("visibility","visible");e(navRight).css("visibility","hidden")}else if(t.currentTab===0){e(navLeft).css("visibility","hidden");e(navRight).css("visibility","visible")}else{e(navLeft).css("visibility","visible");e(navRight).css("visibility","visible")}}},setCurrent:function(n){var r=this;if(r.clickable){if(typeof n=="number"){r.currentTab=n}else{r.currentTab+=~~(n==="right")||-1;if(!r.options.continuous){r.currentTab=r.currentTab<0?this.panelCount-1:r.currentTab%this.panelCount}}if(r.options.continuous){r.panelHeightCount=r.currentTab+1;if(r.currentTab===r.panelCount-2){r.setTab=0}else if(r.currentTab===-1){r.setTab=r.panelCount-3}else{r.setTab=r.currentTab}}else{r.panelHeightCount=r.currentTab;r.setTab=r.currentTab}e(e(r.sliderId).parent()).find(".tab"+(r.setTab+1)+" a:first").addClass("current").parent().siblings().children().removeClass("current");if(r.options.hashLinking){if(r.options.continuous){if(r.currentTab===r.panelCount-2){t.location.hash=1}else if(r.currentTab===-1){t.location.hash=r.panelCount-2}else{t.location.hash=r.currentTab+1}}else{t.location.hash=r.currentTab+1}}this.transition()}},transition:function(){var t=this;if(t.options.autoHeight){e(t.panelContainer).parent().animate({height:e(e(t.panelContainer).children()[t.panelHeightCount]).height()},{easing:t.options.autoHeightEaseFunction,duration:t.options.autoHeightEaseDuration,queue:false})}if(t.options.continuous){t.marginLeft=-(t.currentTab*t.slideWidth)-t.slideWidth}else{t.marginLeft=-(t.currentTab*t.slideWidth)}t.panelContainer.animate({"margin-left":t.marginLeft+t.pSign},{easing:t.options.slideEaseFunction,duration:t.options.slideEaseDuration,queue:false,complete:t.continuousSlide(t.options.slideEaseDuration+50)})},autoSlide:function(){var e=this;if(e.options.autoSlideInterval<e.options.slideEaseDuration){e.options.autoSlideInterval=e.options.slideEaseDuration>e.options.autoHeightEaseDuration?e.options.slideEaseDuration:e.options.autoHeightEaseDuration}if(e.options.continuous){e.clickable=false}e.autoslideTimeout=setTimeout(function(){e.setCurrent(e.options.autoSliderDirection);e.autoSlide()},e.options.autoSlideInterval)},continuousSlide:function(t){var n=this;if(n.options.continuous){n.continuousTimeout=setTimeout(function(){if(n.currentTab===n.panelCount-2){e(n.panelContainer).css("margin-left",-n.slideWidth+n.pSign);n.currentTab=0}else if(n.currentTab===-1){e(n.panelContainer).css("margin-left",-(n.slideWidth*n.panelCount-n.slideWidth*2)+n.pSign);n.currentTab=n.panelCount-3}n.clickable=true},t)}else{n.clickable=true}}};e.fn.codaSlider=function(e){return this.each(function(){var t=Object.create(i);t.init(e,this)})};e.fn.codaSlider.options={autoHeight:true,autoHeightEaseDuration:1500,autoHeightEaseFunction:"easeInOutExpo",autoSlide:false,autoSliderDirection:"right",autoSlideInterval:7e3,autoSlideControls:false,autoSlideStartText:"Start",autoSlideStopText:"Stop",autoSlideStopWhenClicked:true,continuous:true,continuousArrows:true,crossLinking:true,dynamicArrows:true,dynamicArrowsGraphical:false,dynamicArrowLeftText:"&#171; left",dynamicArrowRightText:"right &#187;",dynamicTabs:true,dynamicTabsAlign:"center",dynamicTabsPosition:"top",externalTriggerSelector:"a.xtrig",firstPanelToLoad:1,hashLinking:false,panelTitleSelector:"h2.title",slideEaseDuration:1500,slideEaseFunction:"easeInOutExpo"}})(jQuery,window,document)
